!function(a,e,r){"use strict";function s(e,r,s){var i=a(".usercard");if("code"in s&&"message"in s)return void i.html(m);var t="??"===s.avatar_level,d=t?"javascript:;":"https://home.gamer.com.tw/"+s.userid,c="https://mailbox.gamer.com.tw/send.php?to="+s.userid;i.html(p),i.find(".usercard__background img").attr("src",s.brand_image),i.find(".usercard__avatar").attr("href",d).find("img").attr("src",s.avatar_image),i.find(".usercard-level").addClass(s.avatar_level_class).text(s.avatar_level),i.find(".usercard-username .usercard-label-name").html(s.nickname),t||i.find(".usercard-username .usercard-label-id").attr("href",d).text(s.userid),i.find(".usercard-info").find(".usercard-nickname p").text(s.avatar_title).end().find(".usercard-race p").text(s.avatar_race).end().find(".usercard-coin p").text(s.gold).end().find(".usercard-gp p").text(s.gp),t?i.find(".usercard__option").hide():i.find(".usercard__option").find(".usercard-button-im").attr("onclick",'GamerCard.showIm("'+BAHAID+'","'+s.userid+'")').end().find(".usercard-button-message").attr("href",c).end().show();var l="";for(var n in s.avatar_honor){var o=s.avatar_honor[n];l+='<a href="javascript:;"><img src="'+o.image+'"></a>'}i.find(".usercard-achieve .usercard-slick-item").html(l),e.update(r),setTimeout(function(){a(r).find(".usercard-slick-item").slick({infinite:!1,slidesToShow:8,slidesToScroll:1,swipeToSlide:!0,autoplay:!0,prevArrow:a(r).find(".usercard-slick-prev"),nextArrow:a(r).find(".usercard-slick-next")})},1)}var i=function(){};const t=e.GamerCardConfig||{},d=t.init===r?!0:t.init,c=t.selector||".gamercard",l=t.dataKeyUserid||"gamercard-userid",n="gamerCardTemplate";var o={};i.prototype.bind=function(e){if(0==a("#"+n).length){var r=a("<div />").addClass("usercard").html(u);a("<div />").attr("id",n).hide().append(r).appendTo("body")}var i,t,d=c+":not([data-tooltipped])";e&&(d=e+" "+d);var m=tippy(d,{html:"#"+n,position:"top-start",arrowSize:"big",arrow:!0,delay:600,hideDelay:300,theme:"light",interactive:!0,interactiveBorder:30,duration:240,onShow:function(){var e=this,r=m.getReferenceElement(e);t&&m.hide(t),t=e;var d=a(r).data(l);if(d){i=d.toLowerCase();var c=o[i];c?s(m,e,c):a.get({url:"/ajax/gamercard.php",data:{u:i},beforeSend:function(r,s){a(".usercard").html(u),m.update(e)},success:function(a){m.getReferenceElement(e);o[i]=a,i==a.userid.toLowerCase()&&s(m,e,a)}})}}})};const u='<img class="usercard__progress" src="https://i2.bahamut.com.tw/mobile/loading.svg">',m='<i class="usercard__progress material-icons">error</i>',p='        <div class="usercard__background">          <img>        </div>        <a class="usercard__avatar" target="_blank">          <img>        </a>        <div class="usercard__data">          <div class="usercard-name">            <div class="usercard-level"></div>            <div class="usercard-username">              <p class="usercard-label-name"></p>              <a class="usercard-label-id" target="_blank"></a>            </div>          </div>          <ul class="usercard-info">            <li class="usercard-nickname">              <label>稱號</label>              <p></p>            </li>            <li class="usercard-race">              <label>種族</label>              <p></p>            </li>            <li class="usercard-coin">              <label>巴幣</label>              <p></p>            </li>            <li class="usercard-gp">              <label>GP</label>              <p></p>            </li>          </ul>          <div class="usercard-achieve">            <div class="usercard-slick-item">            </div>            <div class="usercard-slick-controller">              <button class="usercard-slick-prev"><i class="material-icons">keyboard_arrow_left</i></button>              <button class="usercard-slick-next"><i class="material-icons">keyboard_arrow_right</i></button>            </div>          </div>        </div>        <div class="usercard__option">          <a class="usercard-button-message" target="_blank">            <i class="material-icons">mail_outline</i>            <span>寫信</span>          </a>          <a class="usercard-button-im" href="javascript:;">            <i class="material-icons">sms</i>            <span>私訊</span>          </a>        </div>';i.prototype.showIm=function(a,r){if("string"==typeof a&&a&&"string"==typeof r&&r){var a=a.toLowerCase(),r=r.toLowerCase();if(a>r)var s=r+"_"+a;else var s=a+"_"+r;"object"==typeof im_layout&&"full"==im_layout.name?im.hotRoom(s):e.open("https://haha.gamer.com.tw/single.php?room="+s,s,"width=324, height=520")}else egg.mutbox("請先登入才能進行此動作","訊息",{"確定":function(){location.href="https://user.gamer.com.tw/login.php"}})},d&&a(function(){e.GamerCard.bind()}),e.GamerCard=new i}(jQuery,window);