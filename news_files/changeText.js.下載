var Util=Util||{};!function(e){"use strict";var t=function(e,a){var r=document.getElementById(e);if(r){var i=r.innerHTML,c="src",s="",o="",p="";a&t.FLAG_LAZYLOAD&&(c="data-src",s='class="lazyload" '),a&t.FLAG_MAX_SIZE&&(o='style="max-width:120px;max-height:120px;" '),a&t.FLAG_LINE_BREAK&&(p="<br>"),i=i.replace(/(<[^>]*)h(ttp[s]{0,1}:\/\/[^>]*>)/gi,"$1b$2"),a&t.FLAG_BALA_PLAYER?(i=i.replace(/&amp;start/g,"&start"),i=i.replace(/&amp;list/g,"&list"),i=i.replace(/https?:\/\/www\.youtube\.com\/watch\?v=([0-9a-zA-Z_-]{11})(&start=[\d]+)?/gi,"<p style=\" display:block; width:138px; height:77px; background:url(bttps://i1.ytimg.com/vi/$1/default.jpg) no-repeat center center;\" onclick=\"$(this).html('<iframe width=450 height=253 src=bttps://www.youtube.com/embed/$1?autoplay=1&$2 frameborder=0 allowfullscreen></iframe>');$(this).css('width','450px');$(this).css('height','253px');\"><img src=\"bttps://i2.bahamut.com.tw/PLAY2.png\" style=\"cursor: Pointer;\"></p>"),i=i.replace(/https?:\/\/youtu\.be\/([0-9a-zA-Z_-]{11})(?:\?(start=[\d]+))?/gi,"<p style=\" display:block; width:138px; height:77px; background:url(bttps://i1.ytimg.com/vi/$1/default.jpg) no-repeat center center;\" onclick=\"$(this).html('<iframe width=450 height=253 src=bttps://www.youtube.com/embed/$1?autoplay=1&$2 frameborder=0 allowfullscreen></iframe>');$(this).css('width','450px');$(this).css('height','253px');\"><img src=\"bttps://i2.bahamut.com.tw/PLAY2.png\" style=\"cursor: Pointer;\"></p>"),i=i.replace(/h(ttps?:\/\/www\.facebook\.com\/(\w+)\/videos\/(\d+)\/)/gi,"<p style=\" display:block; width:138px; height:77px; background:url(bttps://graph.facebook.com/$3/picture) no-repeat center center;\" onclick=\"$(this).html('<iframe src=bttps://www.facebook.com/plugins/video.php?autoplay=true&href=b$1&width=450&show_text=false&height=253&appId width=450 height=253 style=border:none;overflow:hidden scrolling=no frameborder=0 allowTransparency=true allow=encrypted-media allowFullScreen=true></iframe>');$(this).css('width','450px');$(this).css('height','253px');\"><img src=\"bttps://i2.bahamut.com.tw/PLAY2.png\" style=\"cursor: Pointer;\"></p>"),i=i.replace(/http:\/\/(?:www|tw)\.nicovideo\.jp\/watch\/((?:sm|nm|ca|cd|ax|yo|nl|ig|na|cw|za|zb|zc|zd|ze|om|sk|yk|so|am|fz)[0-9]{1,14}|[0-9]{10})/g,function(e,t){return'<p style=" display:block; width:138px; height:77px; background:url(bttp://tn-skr3.smilevideo.jp/smile?i='+t.replace(/sm|nm|ca|cd|ax|yo|nl|ig|na|cw|za|zb|zc|zd|ze|om|sk|yk|so|am|fz/,"")+') no-repeat center center;" onclick="$(this).html(\'<iframe width=450 height=253 src=bttps://embed.nicovideo.jp/watch/'+t+" frameborder=0 allowfullscreen></iframe>');$(this).css('width','450px');$(this).css('height','253px');\"><img src=\"bttps://i2.bahamut.com.tw/PLAY2.png\" style=\"cursor: Pointer;\"></p>"})):(i=i.replace(/https?:\/\/www\.youtube\.com\/watch\?v=([0-9a-zA-Z_-]{11})/gi,p+"<iframe "+s+c+'="bttps://www.youtube.com/embed/$1" frameborder="0" allowfullscreen></iframe>'),i=i.replace(/https?:\/\/youtu\.be\/([0-9a-zA-Z_-]{11})/gi,p+"<iframe "+s+c+'="bttps://www.youtube.com/embed/$1" frameborder="0" allowfullscreen></iframe>'),i=i.replace(/h(ttps?:\/\/www\.facebook\.com\/\w+\/videos\/\d+\/)/gi,p+"<iframe "+s+c+'="b$1  frameborder=0 allowfullscreen></iframe>'),i=i.replace(/http:\/\/(?:www|tw)\.nicovideo\.jp\/watch\/((?:sm|nm|ca|cd|ax|yo|nl|ig|na|cw|za|zb|zc|zd|ze|om|sk|yk|so|am|fz)[0-9]{1,14}|[0-9]{10})/g,function(e,t){return p+'<a href="'+encodeURI(e).replace("http","bttp")+'"  onclick="Util.ChangeText.refurl(this);" target="_blank"><img src="bttps://i2.bahamut.com.tw/youtube_play.png" background: #000000 url(bttp://tn-skr3.smilevideo.jp/smile?i='+t.replace(/sm|nm|ca|cd|ax|yo|nl|ig|na|cw|za|zb|zc|zd|ze|om|sk|yk|so|am|fz/,"")+') center center no-repeat; background-size: contain;"></a>'})),i=i.replace(/h(ttps?:\/\/[!#-&(-;=?-Z\^-~]+?\.(?:jpe?g|png|gif))/gi,p+'<a href="b$1" target="_blank" onclick="Util.ChangeText.refurl(this);"><img '+o+s+c+'="b$1"></a>'),i=i.replace(/h(ttps?:\/\/([!#-&(-;=?-Z\^-~]+))/gi,p+'<a href="b$1" target="_blank" onclick="Util.ChangeText.refurl(this);">$2</a>'),i=i.replace(/\[e(\d*)\]/gi,"<img "+s+c+'="https://i2.bahamut.com.tw/editor/emotion/$1.gif">'),"undefined"!=typeof gsn&&(i=i.replace(/\[G(1[a-z0-9]{3})\]/gi,"<img "+s+c+'="https://p2.bahamut.com.tw/B/GUILD/e/'+gsn%10+"/"+gsn+'_$1.GIF">'),i=i.replace(/\[G(2[a-z0-9]{3})\]/gi,"<img "+s+c+'="https://p2.bahamut.com.tw/B/GUILD/e/'+gsn%10+"/"+gsn+'_$1.JPG">'),i=i.replace(/\[G(3[a-z0-9]{3})\]/gi,"<img "+s+c+'="https://p2.bahamut.com.tw/B/GUILD/e/'+gsn%10+"/"+gsn+'_$1.PNG">')),i=i.replace(/\[G([0-9]{1}\/\d*_1[a-z0-9]{3})\]/gi,"<img "+s+c+'="https://p2.bahamut.com.tw/B/GUILD/e/$1.GIF">'),i=i.replace(/\[G([0-9]{1}\/\d*_2[a-z0-9]{3})\]/gi,"<img "+s+c+'="https://p2.bahamut.com.tw/B/GUILD/e/$1.JPG">'),i=i.replace(/\[G([0-9]{1}\/\d*_3[a-z0-9]{3})\]/gi,"<img "+s+c+'="https://p2.bahamut.com.tw/B/GUILD/e/$1.PNG">'),i=i.replace(/a>：\[([0-9a-zA-Z]*):([^\]]*)\]/gi,'a> &gt; <a class="msgname AT1" href="http://home.gamer.com.tw/bahawall.php?owner=$1" target="_blank">$2</a>'),i=i.replace(/：\[([0-9a-zA-Z]*):([^\]]*)\]/gi,'、<a class="msgname AT1" href="http://home.gamer.com.tw/bahawall.php?owner=$1" target="_blank">$2</a>'),i=i.replace(/\[([0-9a-zA-Z]*):([^\]]*)\]/gi,'<a class="msgname AT1" href="http://home.gamer.com.tw/bahawall.php?owner=$1" target="_blank">$2</a>'),i=i.replace(/b(ttp[s]{0,1}:\/\/)/gi,"h$1"),r.innerHTML=i,window.GamerCard&&window.GamerCard.bind("#"+e)}};t.refurl=function(e){e.href.match(/^https?:\/\/ref\.gamer\.com\.tw/)||(e.href="https://ref.gamer.com.tw/redir.php?url="+encodeURIComponent(e.href))},t.FLAG_LAZYLOAD=1,t.FLAG_MAX_SIZE=2,t.FLAG_LINE_BREAK=4,t.FLAG_BALA_PLAYER=8,t.FLAG_BALA=t.FLAG_LAZYLOAD|t.FLAG_MAX_SIZE|t.FLAG_LINE_BREAK|t.FLAG_BALA_PLAYER,e.ChangeText=t}(Util);